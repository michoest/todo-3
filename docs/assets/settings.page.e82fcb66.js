import{Q as Be,a as E,b as v,c as S}from"./QList.50109cf9.js";import{k as ve,c as x,h as q,Q as j,o as Qe,a5 as ye,r as P,W as Xe,a6 as Ye,a7 as Je,a8 as Ze,a9 as et,aa as L,U as B,s as tt,ab as ot,b as lt,n as we,ac as he,x as nt,g as at,ad as it,ae as ke,u as Ve,af as st,A as w,B as b,C as l,D as o,H as A,w as ae,J as m,L as I,K as T,R as ie,E as rt,i as ut,a as ct,_ as se,a0 as re,I as dt,a2 as be,a1 as Q,$ as xe,ag as _e}from"./index.581635c0.js";import{Q as ue}from"./uid.50e80bc6.js";import{Q as ft}from"./QBadge.70fe9ef2.js";import{u as mt,a as vt,b as gt}from"./use-checkbox.048f67dc.js";import{r as Ce,a as pt,u as yt,b as wt,c as ht,d as kt,Q as bt}from"./use-model-toggle.439132a6.js";import{Q as xt}from"./QPage.f3206050.js";import{Q as _t,a as Ct}from"./QCard.05a187d8.js";import{a as St,u as qt}from"./use-timeout.97bce41b.js";import{b as Tt,a as Et,h as Pt}from"./scroll.ca49c703.js";var At=ve({name:"QToggle",props:{...mt,icon:String,iconColor:String},emits:vt,setup(e){function t(n,i){const a=x(()=>(n.value===!0?e.checkedIcon:i.value===!0?e.indeterminateIcon:e.uncheckedIcon)||e.icon),c=x(()=>n.value===!0?e.iconColor:null);return()=>[q("div",{class:"q-toggle__track"}),q("div",{class:"q-toggle__thumb absolute flex flex-center no-wrap"},a.value!==void 0?[q(j,{name:a.value,color:c.value})]:void 0)]}return gt("toggle",t)}});function Lt(e,t,n){let i;function a(){i!==void 0&&(ye.remove(i),i=void 0)}return Qe(()=>{e.value===!0&&a()}),{removeFromHistory:a,addToHistory(){i={condition:()=>n.value===!0,handler:t},ye.add(i)}}}const $t={transitionShow:{type:String,default:"fade"},transitionHide:{type:String,default:"fade"},transitionDuration:{type:[String,Number],default:300}};function Bt(e,t=()=>{},n=()=>{}){return{transitionProps:x(()=>{const i=`q-transition--${e.transitionShow||t()}`,a=`q-transition--${e.transitionHide||n()}`;return{appear:!0,enterFromClass:`${i}-enter-from`,enterActiveClass:`${i}-enter-active`,enterToClass:`${i}-enter-to`,leaveFromClass:`${a}-leave-from`,leaveActiveClass:`${a}-leave-active`,leaveToClass:`${a}-leave-to`}}),transitionStyle:x(()=>`--q-transition-duration: ${e.transitionDuration}ms`)}}const ce=[],Qt=ve({name:"QPortal",setup(e,{slots:t}){return()=>t.default()}});function Vt(e){for(e=e.parent;e!=null;){if(e.type.name==="QGlobalDialog")return!0;if(e.type.name==="QDialog"||e.type.name==="QMenu")return!1;e=e.parent}return!1}function Dt(e,t,n,i){const a=P(!1),c=P(!1);let u=null;const g={},h=i==="dialog"&&Vt(e);function f(C){if(C===!0){Ce(g),c.value=!0;return}c.value=!1,a.value===!1&&(h===!1&&u===null&&(u=Ze(!1,i)),a.value=!0,ce.push(e.proxy),pt(g))}function k(C){if(c.value=!1,C!==!0)return;Ce(g),a.value=!1;const $=ce.indexOf(e.proxy);$!==-1&&ce.splice($,1),u!==null&&(et(u),u=null)}return Xe(()=>{k(!0)}),e.proxy.__qPortal=!0,Ye(e.proxy,"contentEl",()=>t.value),{showPortal:f,hidePortal:k,portalIsActive:a,portalIsAccessible:c,renderPortal:()=>h===!0?n():a.value===!0?[q(Je,{to:u},q(Qt,n))]:void 0}}let R=0,de,fe,U,me=!1,Se,qe,Te,V=null;function Ft(e){Ht(e)&&tt(e)}function Ht(e){if(e.target===document.body||e.target.classList.contains("q-layout__backdrop"))return!0;const t=ot(e),n=e.shiftKey&&!e.deltaX,i=!n&&Math.abs(e.deltaX)<=Math.abs(e.deltaY),a=n||i?e.deltaY:e.deltaX;for(let c=0;c<t.length;c++){const u=t[c];if(Pt(u,i))return i?a<0&&u.scrollTop===0?!0:a>0&&u.scrollTop+u.clientHeight===u.scrollHeight:a<0&&u.scrollLeft===0?!0:a>0&&u.scrollLeft+u.clientWidth===u.scrollWidth}return!0}function Ee(e){e.target===document&&(document.scrollingElement.scrollTop=document.scrollingElement.scrollTop)}function X(e){me!==!0&&(me=!0,requestAnimationFrame(()=>{me=!1;const{height:t}=e.target,{clientHeight:n,scrollTop:i}=document.scrollingElement;(U===void 0||t!==window.innerHeight)&&(U=n-t,document.scrollingElement.scrollTop=i),i>U&&(document.scrollingElement.scrollTop-=Math.ceil((i-U)/8))}))}function Pe(e){const t=document.body,n=window.visualViewport!==void 0;if(e==="add"){const{overflowY:i,overflowX:a}=window.getComputedStyle(t);de=Tt(window),fe=Et(window),Se=t.style.left,qe=t.style.top,Te=window.location.href,t.style.left=`-${de}px`,t.style.top=`-${fe}px`,a!=="hidden"&&(a==="scroll"||t.scrollWidth>window.innerWidth)&&t.classList.add("q-body--force-scrollbar-x"),i!=="hidden"&&(i==="scroll"||t.scrollHeight>window.innerHeight)&&t.classList.add("q-body--force-scrollbar-y"),t.classList.add("q-body--prevent-scroll"),document.qScrollPrevented=!0,L.is.ios===!0&&(n===!0?(window.scrollTo(0,0),window.visualViewport.addEventListener("resize",X,B.passiveCapture),window.visualViewport.addEventListener("scroll",X,B.passiveCapture),window.scrollTo(0,0)):window.addEventListener("scroll",Ee,B.passiveCapture))}L.is.desktop===!0&&L.is.mac===!0&&window[`${e}EventListener`]("wheel",Ft,B.notPassive),e==="remove"&&(L.is.ios===!0&&(n===!0?(window.visualViewport.removeEventListener("resize",X,B.passiveCapture),window.visualViewport.removeEventListener("scroll",X,B.passiveCapture)):window.removeEventListener("scroll",Ee,B.passiveCapture)),t.classList.remove("q-body--prevent-scroll"),t.classList.remove("q-body--force-scrollbar-x"),t.classList.remove("q-body--force-scrollbar-y"),document.qScrollPrevented=!1,t.style.left=Se,t.style.top=qe,window.location.href===Te&&window.scrollTo(de,fe),U=void 0)}function It(e){let t="add";if(e===!0){if(R++,V!==null){clearTimeout(V),V=null;return}if(R>1)return}else{if(R===0||(R--,R>0))return;if(t="remove",L.is.ios===!0&&L.is.nativeMobile===!0){V!==null&&clearTimeout(V),V=setTimeout(()=>{Pe(t),V=null},100);return}}Pe(t)}function Mt(){let e;return{preventBodyScroll(t){t!==e&&(e!==void 0||t===!0)&&(e=t,It(t))}}}const D=[];let M;function zt(e){M=e.keyCode===27}function Ot(){M===!0&&(M=!1)}function Rt(e){M===!0&&(M=!1,lt(e,27)===!0&&D[D.length-1](e))}function De(e){window[e]("keydown",zt),window[e]("blur",Ot),window[e]("keyup",Rt),M=!1}function Ut(e){L.is.desktop===!0&&(D.push(e),D.length===1&&De("addEventListener"))}function Ae(e){const t=D.indexOf(e);t!==-1&&(D.splice(t,1),D.length===0&&De("removeEventListener"))}const F=[];function Fe(e){F[F.length-1](e)}function jt(e){L.is.desktop===!0&&(F.push(e),F.length===1&&document.body.addEventListener("focusin",Fe))}function Le(e){const t=F.indexOf(e);t!==-1&&(F.splice(t,1),F.length===0&&document.body.removeEventListener("focusin",Fe))}let Y=0;const Kt={standard:"fixed-full flex-center",top:"fixed-top justify-center",bottom:"fixed-bottom justify-center",right:"fixed-right items-center",left:"fixed-left items-center"},$e={standard:["scale","scale"],top:["slide-down","slide-up"],bottom:["slide-up","slide-down"],right:["slide-left","slide-right"],left:["slide-right","slide-left"]};var Nt=ve({name:"QDialog",inheritAttrs:!1,props:{...yt,...$t,transitionShow:String,transitionHide:String,persistent:Boolean,autoClose:Boolean,allowFocusOutside:Boolean,noEscDismiss:Boolean,noBackdropDismiss:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,noShake:Boolean,seamless:Boolean,maximized:Boolean,fullWidth:Boolean,fullHeight:Boolean,square:Boolean,backdropFilter:String,position:{type:String,default:"standard",validator:e=>["standard","top","bottom","left","right"].includes(e)}},emits:[...wt,"shake","click","escapeKey"],setup(e,{slots:t,emit:n,attrs:i}){const a=at(),c=P(null),u=P(!1),g=P(!1);let h=null,f=null,k,C;const $=x(()=>e.persistent!==!0&&e.noRouteDismiss!==!0&&e.seamless!==!0),{preventBodyScroll:z}=Mt(),{registerTimeout:K}=St(),{registerTick:J,removeTick:N}=qt(),{transitionProps:Z,transitionStyle:p}=Bt(e,()=>$e[e.position][0],()=>$e[e.position][1]),d=x(()=>p.value+(e.backdropFilter!==void 0?`;backdrop-filter:${e.backdropFilter};-webkit-backdrop-filter:${e.backdropFilter}`:"")),{showPortal:r,hidePortal:_,portalIsAccessible:He,renderPortal:Ie}=Dt(a,c,Ge,"dialog"),{hide:W}=ht({showing:u,hideOnRouteChange:$,handleShow:je,handleHide:Ke,processOnMount:!0}),{addToHistory:Me,removeFromHistory:ze}=Lt(u,W,$),Oe=x(()=>`q-dialog__inner flex no-pointer-events q-dialog__inner--${e.maximized===!0?"maximized":"minimized"} q-dialog__inner--${e.position} ${Kt[e.position]}`+(g.value===!0?" q-dialog__inner--animating":"")+(e.fullWidth===!0?" q-dialog__inner--fullwidth":"")+(e.fullHeight===!0?" q-dialog__inner--fullheight":"")+(e.square===!0?" q-dialog__inner--square":"")),G=x(()=>u.value===!0&&e.seamless!==!0),Re=x(()=>e.autoClose===!0?{onClick:Ne}:{}),Ue=x(()=>[`q-dialog fullscreen no-pointer-events q-dialog--${G.value===!0?"modal":"seamless"}`,i.class]);we(()=>e.maximized,s=>{u.value===!0&&oe(s)}),we(G,s=>{z(s),s===!0?(jt(le),Ut(te)):(Le(le),Ae(te))});function je(s){Me(),f=e.noRefocus===!1&&document.activeElement!==null?document.activeElement:null,oe(e.maximized),r(),g.value=!0,e.noFocus!==!0?(document.activeElement!==null&&document.activeElement.blur(),J(O)):N(),K(()=>{if(a.proxy.$q.platform.is.ios===!0){if(e.seamless!==!0&&document.activeElement){const{top:y,bottom:H}=document.activeElement.getBoundingClientRect(),{innerHeight:pe}=window,ne=window.visualViewport!==void 0?window.visualViewport.height:pe;y>0&&H>ne/2&&(document.scrollingElement.scrollTop=Math.min(document.scrollingElement.scrollHeight-ne,H>=pe?1/0:Math.ceil(document.scrollingElement.scrollTop+H-ne/2))),document.activeElement.scrollIntoView()}C=!0,c.value.click(),C=!1}r(!0),g.value=!1,n("show",s)},e.transitionDuration)}function Ke(s){N(),ze(),ge(!0),g.value=!0,_(),f!==null&&(((s&&s.type.indexOf("key")===0?f.closest('[tabindex]:not([tabindex^="-"])'):void 0)||f).focus(),f=null),K(()=>{_(!0),g.value=!1,n("hide",s)},e.transitionDuration)}function O(s){kt(()=>{let y=c.value;if(y!==null){if(s!==void 0){const H=y.querySelector(s);if(H!==null){H.focus({preventScroll:!0});return}}y.contains(document.activeElement)!==!0&&(y=y.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||y.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||y.querySelector("[autofocus], [data-autofocus]")||y,y.focus({preventScroll:!0}))}})}function ee(s){s&&typeof s.focus=="function"?s.focus({preventScroll:!0}):O(),n("shake");const y=c.value;y!==null&&(y.classList.remove("q-animate--scale"),y.classList.add("q-animate--scale"),h!==null&&clearTimeout(h),h=setTimeout(()=>{h=null,c.value!==null&&(y.classList.remove("q-animate--scale"),O())},170))}function te(){e.seamless!==!0&&(e.persistent===!0||e.noEscDismiss===!0?e.maximized!==!0&&e.noShake!==!0&&ee():(n("escapeKey"),W()))}function ge(s){h!==null&&(clearTimeout(h),h=null),(s===!0||u.value===!0)&&(oe(!1),e.seamless!==!0&&(z(!1),Le(le),Ae(te))),s!==!0&&(f=null)}function oe(s){s===!0?k!==!0&&(Y<1&&document.body.classList.add("q-body--dialog"),Y++,k=!0):k===!0&&(Y<2&&document.body.classList.remove("q-body--dialog"),Y--,k=!1)}function Ne(s){C!==!0&&(W(s),n("click",s))}function We(s){e.persistent!==!0&&e.noBackdropDismiss!==!0?W(s):e.noShake!==!0&&ee()}function le(s){e.allowFocusOutside!==!0&&He.value===!0&&it(c.value,s.target)!==!0&&O('[tabindex]:not([tabindex="-1"])')}Object.assign(a.proxy,{focus:O,shake:ee,__updateRefocusTarget(s){f=s||null}}),Qe(ge);function Ge(){return q("div",{role:"dialog","aria-modal":G.value===!0?"true":"false",...i,class:Ue.value},[q(he,{name:"q-transition--fade",appear:!0},()=>G.value===!0?q("div",{class:"q-dialog__backdrop fixed-full",style:d.value,"aria-hidden":"true",tabindex:-1,onClick:We}):null),q(he,Z.value,()=>u.value===!0?q("div",{ref:c,class:Oe.value,style:p.value,tabindex:-1,...Re.value},nt(t.default)):null)])}return Ie}});const Wt=Object.assign({name:"AccountActionsDialog"},{__name:"accountActions.dialog",props:ke({account:Object},{modelValue:{},modelModifiers:{}}),emits:ke(["setDefault","login"],["update:modelValue"]),setup(e,{emit:t}){const n=Ve(),i=st(e,"modelValue"),a=e,c=t,u=h=>{i.value=!1,c("setDefault",h?a.account.id:null)},g=()=>{i.value=!1,c("login",a.account.id)};return(h,f)=>(w(),b(Nt,{modelValue:i.value,"onUpdate:modelValue":f[2]||(f[2]=k=>i.value=k),position:"bottom"},{default:l(()=>[o(Ct,{style:{width:"350px"}},{default:l(()=>[o(_t,null,{default:l(()=>[o(Be,{separator:""},{default:l(()=>[a.account.id==A(n).user.defaultAccount?ae((w(),b(E,{key:0,clickable:"",onClick:f[0]||(f[0]=k=>u(!1))},{default:l(()=>[o(v,{avatar:""},{default:l(()=>[o(j,{name:"person_remove"})]),_:1}),o(v,null,{default:l(()=>f[3]||(f[3]=[m("Unset default account")])),_:1})]),_:1})),[[ie]]):I("",!0),a.account.id!=A(n).user.defaultAccount?ae((w(),b(E,{key:1,clickable:"",onClick:f[1]||(f[1]=k=>u(!0))},{default:l(()=>[o(v,{avatar:""},{default:l(()=>[o(j,{name:"person_add"})]),_:1}),o(v,null,{default:l(()=>f[4]||(f[4]=[m("Set as default account")])),_:1})]),_:1})),[[ie]]):I("",!0),a.account.id!=A(n).account.id?ae((w(),b(E,{key:2,clickable:"",onClick:g},{default:l(()=>[o(v,{avatar:""},{default:l(()=>[o(j,{name:"login"})]),_:1}),o(v,null,{default:l(()=>[m("Login to "+T(a.account.description),1)]),_:1})]),_:1})),[[ie]]):I("",!0)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),ao=Object.assign({name:"SettingsPage"},{__name:"settings.page",setup(e){const t=rt(),n=Ve(),i=ut("notify"),a=P({show:!1,account:null}),c=P(""),u=P(!1),g=P(!1),h=x(()=>{var p;return((p=n.user)==null?void 0:p.accounts)||[]}),f=x(()=>g.value?n.notifications:n.notifications.filter(p=>p.read==!1)),k=x(()=>n.notifications.filter(p=>p.read==!1).length),C=async()=>{u.value=await n.checkAPI(c.value)},$=()=>{n.setAPI(c.value),i("API updated!")},z=async p=>{await n.loginToAccount(p)&&t.push("/")},K=()=>{},J=p=>{a.value.account=p,a.value.show=!0},N=async p=>{await n.setDefaultAccount(p)},Z=async()=>{await n.logout()&&t.push("/")};return ct(async()=>{c.value=n.persistent.api,await C()}),(p,d)=>(w(),se(re,null,[o(xt,null,{default:l(()=>[o(Be,{class:"q-pa-sm q-pt-md"},{default:l(()=>[o(S,{header:""},{default:l(()=>d[3]||(d[3]=[m("User")])),_:1}),o(E,{class:"q-pb-lg"},{default:l(()=>[o(v,{avatar:""},{default:l(()=>[o(dt,null,{default:l(()=>d[4]||(d[4]=[be("img",{src:"https://cdn.quasar.dev/img/avatar4.jpg"},null,-1)])),_:1})]),_:1}),o(v,null,{default:l(()=>[o(S,null,{default:l(()=>{var r,_;return[m(T((r=A(n).user)==null?void 0:r.name.first)+" "+T((_=A(n).user)==null?void 0:_.name.last),1)]}),_:1}),o(S,{caption:"",lines:"1"},{default:l(()=>{var r;return[m(T((r=A(n).user)==null?void 0:r.email),1)]}),_:1})]),_:1}),o(v,{side:""},{default:l(()=>[o(Q,{flat:"",round:"",icon:"more_horiz",color:"grey",onClick:K})]),_:1})]),_:1}),o(E,null,{default:l(()=>[o(v,null,{default:l(()=>[o(Q,{color:"negative",outline:"",onClick:Z},{default:l(()=>d[5]||(d[5]=[m("Sign out")])),_:1})]),_:1})]),_:1}),o(ue,{inset:"",spaced:"xl"}),o(S,{header:""},{default:l(()=>d[6]||(d[6]=[m("Accounts")])),_:1}),(w(!0),se(re,null,xe(h.value,r=>(w(),b(E,{key:r.id,class:_e({"bg-grey-2":A(n).account.id==r.id})},{default:l(()=>[o(v,{onClick:_=>z(r.id)},{default:l(()=>[o(S,null,{default:l(()=>{var _;return[m(T(r.description)+" ",1),((_=A(n).user)==null?void 0:_.defaultAccount)==r.id?(w(),b(j,{key:0,name:"verified_user",color:"positive"})):I("",!0)]}),_:2},1024),o(S,{caption:"",lines:"1"},{default:l(()=>[m(T(r.id),1)]),_:2},1024)]),_:2},1032,["onClick"]),o(v,{side:""},{default:l(()=>[o(Q,{flat:"",round:"",icon:"more_horiz",color:"grey",onClick:_=>J(r)},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["class"]))),128)),o(ue,{inset:"",spaced:"xl"}),o(S,{header:"",class:"flex justify-between items-center"},{default:l(()=>[be("span",null,[d[7]||(d[7]=m("Notifications")),k.value>0?(w(),b(ft,{key:0,color:"negative",rounded:"",class:"q-ml-sm"},{default:l(()=>[m(T(k.value),1)]),_:1})):I("",!0)]),o(At,{modelValue:g.value,"onUpdate:modelValue":d[0]||(d[0]=r=>g.value=r),label:"Show all"},null,8,["modelValue"])]),_:1}),(w(!0),se(re,null,xe(f.value,r=>(w(),b(E,{key:r.id},{default:l(()=>[o(v,{side:""},{default:l(()=>[r.read?(w(),b(Q,{key:1,flat:"",round:"",dense:"",icon:"mark_email_unread",onClick:_=>r.read=!1},null,8,["onClick"])):(w(),b(Q,{key:0,flat:"",round:"",dense:"",icon:"mark_email_read",onClick:_=>r.read=!0},null,8,["onClick"]))]),_:2},1024),o(v,{class:_e({"text-bold":!r.read})},{default:l(()=>[o(S,null,{default:l(()=>[m(T(r.title),1)]),_:2},1024),o(S,{caption:""},{default:l(()=>[m(T(r.body),1)]),_:2},1024)]),_:2},1032,["class"])]),_:2},1024))),128)),f.value.length==0?(w(),b(E,{key:0,class:"flex justify-center"},{default:l(()=>[g.value?(w(),b(v,{key:0,class:"text-center"},{default:l(()=>d[8]||(d[8]=[m(" There are no notifications! ")])),_:1})):(w(),b(v,{key:1,class:"text-center"},{default:l(()=>d[9]||(d[9]=[m(" There are no unread notifications! ")])),_:1}))]),_:1})):I("",!0),o(ue,{inset:"",spaced:"xl"}),o(S,{header:""},{default:l(()=>d[10]||(d[10]=[m("Backend")])),_:1}),o(E,null,{default:l(()=>[o(v,null,{default:l(()=>[o(bt,{modelValue:c.value,"onUpdate:modelValue":d[1]||(d[1]=r=>c.value=r),placeholder:"API URL"},{append:l(()=>[o(Q,{round:"",dense:"",flat:"",icon:"network_check",color:u.value?"positive":"negative",onClick:C},null,8,["color"]),o(Q,{round:"",dense:"",flat:"",color:"primary",icon:"sync",onClick:$})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),o(Wt,{modelValue:a.value.show,"onUpdate:modelValue":d[2]||(d[2]=r=>a.value.show=r),account:a.value.account,onSetDefault:N,onLogin:z},null,8,["modelValue","account"])],64))}});export{ao as default};
