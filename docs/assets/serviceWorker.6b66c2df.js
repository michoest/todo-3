import{u as s,N as n}from"./index.aa543579.js";async function c(){if("serviceWorker"in navigator)try{const e=await navigator.serviceWorker.register("/sw.js");return console.log("ServiceWorker registration successful with scope: ",e.scope),e.addEventListener("updatefound",()=>{const r=e.installing;r.addEventListener("statechange",()=>{r.state==="installed"&&navigator.serviceWorker.controller&&a()})}),await t(e),!0}catch{return!1}}async function t(e){try{await e.update(),e.waiting&&a()}catch(r){console.error("Error checking for service worker update:",r)}}function a(){n.create({message:"A new version is available. Please refresh to update.",color:"primary",actions:[{label:"Refresh",handler:()=>{window.location.reload()}}]})}var d=async({app:e,store:r})=>{const o=await c(),i=s(r);i.global.push=o};setInterval(()=>{navigator.serviceWorker.getRegistration().then(t)},60*60*1e3);export{d as default};
